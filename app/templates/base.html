<!DOCTYPE html>
<html lang="en">
<head>
  <title>{{ title }}</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
        crossorigin="anonymous"
  >
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
          crossorigin="anonymous"
  ></script>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css"
        integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e"
        crossorigin="anonymous"
  >
</head>
<body>


{% with style='padding-bottom: 1rem; padding-top: 1rem',
        classes='text-bg-success bg-opacity-75' %}
  {% if session %}
    <header class="container-fluid {{ classes }}" style="{{ style }}">
      <div class="container">
        <h1 id="stopwatch" class="w-100 text-center display-3"></h1>
      </div>
    </header>

    <div class="container-fluid text-bg-secondary bg-opacity-50"
         style="padding-bottom: 0.1rem; padding-top: 0.1rem">
      <div class="container">
        <h2 class="w-100 text-center display-6">{{ title }}</h2>
      </div>
    </div>

    <script>
        (function () {
            const stopwatch = document.getElementById('stopwatch');
            const started = new Date('{{ session.iso_date }}');

            function pad(num) {
                return num.toString().padStart(2, '0');
            }

            function updateStopwatch() {
                const now = new Date();
                const time = new Date(now - started);
                const hours = pad(time.getUTCHours());
                const minutes = pad(time.getUTCMinutes());
                const seconds = pad(time.getUTCSeconds());
                stopwatch.innerText = `${hours}:${minutes}:${seconds}`;
            }

            updateStopwatch();
            setInterval(updateStopwatch, 1000);
        })()
    </script>
  {% else %}
    <header class="container-fluid {{ classes }}" style="{{ style }}">
      <div class="container">
        <h1 class="w-100 text-center display-3">{{ title }}</h1>
      </div>
    </header>
  {% endif %}
{% endwith %}


<main id="content" class="container mt-3">
  {% block content required %}{% endblock %}
</main>


{% if version %}
  <footer class="container-fluid mt-4">
    <div class="container">
      <p class="w-100 text-center text-secondary text-opacity-50">Version {{ version }}</p>
    </div>
  </footer>
{% endif %}


</body>
</html>
